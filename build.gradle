plugins {
    id 'java-library'
    id 'maven'
}

repositories {
   jcenter()
}

sourceCompatibility = '1.8'
targetCompatibility = '1.8'
group = 'com.exclamationlabs.connid'

def build_version = System.getenv('BUILD_NUMBER') == null ? 'SNAPSHOT' : System.getenv('BUILD_NUMBER')
project.version="${software_version}-${build_version}"

dependencies {
    api 'net.tirasa.connid:connector-test-common:1.5.0.0'
    api 'org.apache.httpcomponents:httpclient:4.5.10'
    api 'org.mockito:mockito-core:3.1.0'
    api 'junit:junit:4.12'
}

task generatePom {
    doLast {
        pom().writeTo("build/libs/${project.name}-${project.version}.pom")
    }
}
build.dependsOn(generatePom)
